<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Terms Quiz</title>
    <style>
        :root {
            --primary: #4A90E2;
            --success: #2ECC71;
            --error: #E74C3C;
            --bg: #f5f7fa;
            --card: #ffffff;
            --text: #2c3e50;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            background: var(--card);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 600px;
            padding: 30px;
            text-align: center;
        }

        h1 { margin-bottom: 10px; font-size: 28px; color: var(--primary); }
        .subtitle { color: #7f8c8d; margin-bottom: 30px; font-size: 16px; }
        
        .mode-select button, .option-btn, .next-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
            transition: transform 0.1s, opacity 0.2s;
            width: 100%;
            max-width: 300px;
        }

        .mode-select button:hover { transform: translateY(-2px); }
        
        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            color: var(--text);
            margin-bottom: 10px;
            text-align: left;
        }

        .option-btn:hover { border-color: var(--primary); background: #f0f7ff; }

        .option-btn.correct { background: var(--success); color: white; border-color: var(--success); }
        .option-btn.wrong { background: var(--error); color: white; border-color: var(--error); }

        .quiz-area { display: none; }
        
        .term-display {
            font-size: 32px;
            font-weight: bold;
            margin: 20px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .audio-link {
            text-decoration: none;
            font-size: 24px;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        .audio-link:hover { opacity: 1; transform: scale(1.1); }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: #f8f9fa;
            display: none;
            text-align: left;
            border-left: 5px solid #ccc;
        }

        .feedback.show { display: block; }
        .feedback.success { border-left-color: var(--success); }
        .feedback.error { border-left-color: var(--error); }

        .stats {
            margin-top: 20px;
            font-size: 14px;
            color: #7f8c8d;
            display: flex;
            justify-content: space-between;
        }

        .hidden { display: none; }

    </style>
</head>
<body>

<div class="container" id="app">
    <div id="start-screen">
        <h1>Music Terms Quiz</h1>
        <p class="subtitle">Italian, German & French Terms</p>
        
        <div class="mode-select">
            <button onclick="startQuiz('zh')">‰∏≠ÊñáÊ®°Âºè (Chinese Mode)</button>
            <button onclick="startQuiz('en')">English Mode</button>
        </div>
        <div style="margin-top: 30px; font-size: 13px; color: #999; line-height: 1.6;">
            üí° Tip: Click the <span style="font-size:16px">üîä</span> icon next to the word<br>to hear the pronunciation on Google Translate.
        </div>
    </div>

    <div id="quiz-screen" class="quiz-area">
        <div class="stats">
            <span id="score-display">Score: 0</span>
            <span id="progress-display">Q: 1 / ‚àû</span>
        </div>

        <div class="term-display">
            <span id="question-term">Loading...</span>
            <a id="audio-btn" href="#" target="_blank" class="audio-link" title="Listen on Google Translate">üîä</a>
        </div>

        <div id="options-container">
            </div>

        <div id="feedback-area" class="feedback">
            <h3 id="feedback-title"></h3>
            <p id="feedback-text"></p>
        </div>

        <button id="next-btn" class="next-btn hidden" onclick="nextQuestion()">Next Question</button>
        <button class="next-btn" style="background:#95a5a6; margin-top:20px;" onclick="location.reload()">Menu</button>
    </div>
</div>

<script>
    // Database of terms provided by user
    const musicTerms = [
        { term: "langsam", def: "ÊÖ¢ÁöÑ", lang: "German", en: "Slow" },
        { term: "lent", def: "ÊÖ¢ÁöÑ", lang: "French", en: "Slow" },
        { term: "largo", def: "Âª£Êùø (ÂØ¨Âª£Âú∞„ÄÅÁ∑©ÊÖ¢Âú∞)", lang: "Italian", en: "Broad, slow" },
        { term: "lento", def: "ÊÖ¢Êùø (ÊÖ¢Âú∞)", lang: "Italian", en: "Slow" },
        { term: "larghetto", def: "Â∞èÂª£Êùø (ÊØî Largo Á®çÂø´)", lang: "Italian", en: "Rather broad (faster than Largo)" },
        { term: "andantino", def: "Â∞èË°åÊùø (ÊØî Andante Á®çÂø´ÊàñÁ®çÊÖ¢)", lang: "Italian", en: "Slightly faster/slower than Andante" },
        { term: "andante", def: "Ë°åÊùø (Ë°åËµ∞ÁöÑÂàùÂ∫¶)", lang: "Italian", en: "Walking pace" },
        { term: "comodo, tempo comodo", def: "ËàíÈÅ©Âú∞„ÄÅËá™Âú®ÁöÑÈÄüÂ∫¶", lang: "Italian", en: "Comfortable, convenient tempo" },
        { term: "mod√©r√©", def: "‰∏≠Á≠âÁöÑ„ÄÅÊúâÁØÄÂà∂ÁöÑ", lang: "French", en: "Moderate" },
        { term: "m√§√üig", def: "‰∏≠Á≠âÁöÑ„ÄÅÈÅ©Â∫¶ÁöÑ", lang: "German", en: "Moderate" },
        { term: "meno mosso", def: "Á®çÊÖ¢ (Âãï‰ΩúËºÉÂ∞ë)", lang: "Italian", en: "Less movement (slower)" },
        { term: "retenu", def: "Á™ÅÊÖ¢ (Ë¢´Âãí‰Ωè)", lang: "French", en: "Held back" },
        { term: "rubato, tempo rubato", def: "ÂΩàÊÄßÈÄüÂ∫¶ (Ë¢´ÂÅ∑Ëµ∞ÁöÑÊôÇÈñì)", lang: "Italian", en: "Robbed time (flexible tempo)" },
        { term: "ritenuto", def: "Á™ÅÊÖ¢ (Á´ãÂç≥ÊîæÊÖ¢)", lang: "Italian", en: "Held back (suddenly slower)" },
        { term: "rallentando", def: "Êº∏ÊÖ¢", lang: "Italian", en: "Gradually getting slower" },
        { term: "ritardando", def: "Êº∏ÊÖ¢", lang: "Italian", en: "Gradually getting slower" },
        { term: "a tempo", def: "ÂõûÂéüÈÄü", lang: "Italian", en: "Back to original speed" },
        { term: "come prima", def: "Â¶ÇÂàù (ÂõûÂà∞ÊúÄÂàùÁöÑÁãÄÊÖã)", lang: "Italian", en: "As before/first" },
        { term: "alla breve", def: "‰∫å‰∫åÊãç (‰ª•‰∫åÂàÜÈü≥Á¨¶ÁÇ∫‰∏ÄÊãç)", lang: "Italian", en: "Cut common time (2/2)" },
        { term: "alla marcia", def: "ÈÄ≤Ë°åÊõ≤È¢®Ê†º", lang: "Italian", en: "In the style of a march" },
        { term: "grazioso", def: "ÂÑ™ÈõÖÂú∞", lang: "Italian", en: "Graceful" },
        { term: "allegretto", def: "Â∞èÂø´Êùø (ÊØî Allegro Á®çÊÖ¢)", lang: "Italian", en: "Fairly fast (slower than Allegro)" },
        { term: "allegro", def: "Âø´Êùø (Âø´ÈÄü„ÄÅÂø´Ê®Ç)", lang: "Italian", en: "Fast, lively" },
        { term: "pi√π mosso", def: "Á®çÂø´ (Âãï‰ΩúÊõ¥Â§ö)", lang: "Italian", en: "More movement (quicker)" },
        { term: "animato", def: "ÁîüÂãïÂú∞„ÄÅÊ¥ªË∫çÂú∞", lang: "Italian", en: "Animated" },
        { term: "Vivace", def: "ÂÖÖÊªøÊ¥ªÂäõÁöÑ„ÄÅÁîöÂø´", lang: "Italian", en: "Lively, quick" },
        { term: "vivo", def: "Ê¥ªÊΩëÂú∞", lang: "Italian", en: "Lively" },
        { term: "stringendo", def: "Âä†Á∑ä (Êº∏Âø´)", lang: "Italian", en: "Pressing on (faster)" },
        { term: "vite", def: "Âø´ÈÄüÂú∞", lang: "French", en: "Fast" },
        { term: "schnell", def: "Âø´ÈÄüÂú∞", lang: "German", en: "Fast" },
        { term: "presto", def: "ÊÄ•Êùø (ÂæàÂø´)", lang: "Italian", en: "Very fast" },
        { term: "prestissimo", def: "ÊúÄÊÄ•Êùø (Ê•µÂø´)", lang: "Italian", en: "As fast as possible" },
        { term: "accelerando", def: "Êº∏Âø´", lang: "Italian", en: "Gradually getting faster" },
        { term: "da capo", def: "ÂæûÈ†≠ÂÜçÂ•è", lang: "Italian", en: "From the beginning" },
        { term: "fine, al fine", def: "ÁµêÊùü", lang: "Italian", en: "The end" },
        { term: "legato", def: "ÂúìÊªëÂ•è (ÈÄ£Â•è)", lang: "Italian", en: "Smoothly" },
        { term: "staccato", def: "Êñ∑Â•è", lang: "Italian", en: "Detached" },
        { term: "dal segno", def: "ÂæûË®òËôüËôïÂÜçÂ•è", lang: "Italian", en: "From the sign" },
        { term: "fortepiano", def: "Âº∑ÂæåÁ™ÅÂº±", lang: "Italian", en: "Loud then immediately soft" },
        { term: "leggiero", def: "ËºïÂ∑ßÂú∞", lang: "Italian", en: "Lightly" },
        { term: "marcato", def: "Âä†Âº∑Èü≥ (Ê®ôÁ§∫Ê∏ÖÊô∞)", lang: "Italian", en: "Marked, accented" },
        { term: "prima, primo", def: "Á¨¨‰∏Ä (Ê¨°/ÈÉ®)", lang: "Italian", en: "First" },
        { term: "simile", def: "ÂêåÂâç (ÂêåÊ®£ÁöÑÊñπÂºèÊºîÂ•è)", lang: "Italian", en: "In the same way" },
        { term: "ad libitum", def: "Èö®ÊÑèÂú∞ (ÈÄüÂ∫¶/È¢®Ê†ºËá™Áî±)", lang: "Latin", en: "At choice/liberty" },
        { term: "attacca", def: "Á∑äÊé•‰∏ãÊÆµ", lang: "Italian", en: "Go straight on" },
        { term: "crescendo", def: "Êº∏Âº∑", lang: "Italian", en: "Gradually getting louder" },
        { term: "decrescendo", def: "Êº∏Âº±", lang: "Italian", en: "Gradually getting softer" },
        { term: "diminuendo", def: "Êº∏Âº±", lang: "Italian", en: "Gradually getting softer" },
        { term: "forte", def: "Âº∑", lang: "Italian", en: "Loud" },
        { term: "fortissimo", def: "ÁîöÂº∑", lang: "Italian", en: "Very loud" },
        { term: "mezzo piano", def: "‰∏≠Âº±", lang: "Italian", en: "Moderately soft" },
        { term: "piano", def: "Âº±", lang: "Italian", en: "Soft" },
        { term: "pianissimo", def: "ÁîöÂº±", lang: "Italian", en: "Very soft" },
        { term: "grave", def: "ËéäÊùø (Ê•µÁ∑©ÊÖ¢ËéäÂö¥)", lang: "Italian", en: "Very slow, solemn" },
        { term: "sforzando / sforzato", def: "Á™ÅÂº∑ (Âº∑Ë™øÂñÆÈü≥)", lang: "Italian", en: "Forced, accented" },
        { term: "rinforzando", def: "Âä†Âº∑ (ÈÄöÂ∏∏ÊåáÊ®ÇÂè•)", lang: "Italian", en: "Reinforcing" },
        { term: "cantabile", def: "Â¶ÇÊ≠åÂú∞", lang: "Italian", en: "In a singing style" },
        { term: "dolce", def: "ÁîúÁæéÂú∞„ÄÅÊ∫´ÊüîÂú∞", lang: "Italian", en: "Sweet, soft" },
        { term: "espressivo", def: "ÂØåÊúâË°®ÊÉÖÂú∞", lang: "Italian", en: "Expressive" },
        { term: "ben", def: "ÂÖÖÂàÜÂú∞„ÄÅÂæàÂ•ΩÂú∞", lang: "Italian", en: "Well" },
        { term: "con forza", def: "ÊúâÂäõÂú∞", lang: "Italian", en: "With force" },
        { term: "energico", def: "Á≤æÂäõÂÖÖÊ≤õÂú∞", lang: "Italian", en: "Energetic" },
        { term: "giocoso", def: "Ë©ºË´ßÂú∞„ÄÅÂø´Ê®ÇÂú∞", lang: "Italian", en: "Playful, merry" },
        { term: "scherzando", def: "Êà≤Ë¨îÂú∞„ÄÅÈñãÁé©Á¨ëÂú∞", lang: "Italian", en: "Playful, joking" },
        { term: "semplice", def: "ÂñÆÁ¥îÂú∞„ÄÅÊ®∏Á¥†Âú∞", lang: "Italian", en: "Simple, plain" },
        { term: "sempre", def: "ÂßãÁµÇ„ÄÅ‰∏ÄÁõ¥", lang: "Italian", en: "Always" },
        { term: "sostenuto", def: "ÊåÅÁ∫åÂú∞ (Èü≥Ë¶ÅÊãñÈï∑)", lang: "Italian", en: "Sustained" },
        { term: "subito", def: "Á™ÅÁÑ∂Âú∞", lang: "Italian", en: "Suddenly" },
        { term: "tranquillo", def: "Âπ≥ÈùúÂú∞", lang: "Italian", en: "Calm" },
        { term: "triste, tristamente", def: "ÊÇ≤ÂÇ∑Âú∞", lang: "Italian", en: "Sad, sorrowful" },
        { term: "affettuoso", def: "Ê∑±ÊÉÖÂú∞", lang: "Italian", en: "Affectionate" },
        { term: "amabile", def: "ÂèØÊÑõÂú∞„ÄÅË¶™ÂàáÂú∞", lang: "Italian", en: "Amiable, pleasant" },
        { term: "appassionato", def: "ÁÜ±ÊÉÖÂú∞", lang: "Italian", en: "Passionate" },
        { term: "con brio", def: "ÊúâÊ¥ªÂäõÂú∞„ÄÅËºùÁÖåÂú∞", lang: "Italian", en: "With vigour/spirit" },
        { term: "deciso", def: "Â†ÖÂÆöÂú∞", lang: "Italian", en: "With determination" },
        { term: "mesto", def: "ÊÜÇÈ¨±Âú∞„ÄÅÊÇ≤ÂÇ∑Âú∞", lang: "Italian", en: "Sad" },
        { term: "misterioso", def: "Á•ûÁßòÂú∞", lang: "Italian", en: "Mysterious" },
        { term: "anim√©", def: "Ê¥ªË∫çÁöÑ", lang: "French", en: "Animated, lively" },
        { term: "douce, doux", def: "ÁîúÁæéÁöÑ„ÄÅÊ∫´ÊüîÁöÑ", lang: "French", en: "Sweet" },
        { term: "lebhaft", def: "Ê¥ªÊΩëÁöÑ", lang: "German", en: "Lively" },
        { term: "ruhig", def: "Âπ≥ÈùúÁöÑ", lang: "German", en: "Peaceful" },
        { term: "traurig", def: "ÊÇ≤ÂÇ∑ÁöÑ", lang: "German", en: "Sad" },
        { term: "a niente", def: "Êº∏Âº±Ëá≥ÁÑ°ËÅ≤", lang: "Italian", en: "To nothing" },
        { term: "morendo", def: "Êº∏Âº±Ê∂àÂ§± (ÂûÇÊ≠ªÁãÄ)", lang: "Italian", en: "Dying away" },
        { term: "perdendosi", def: "ÈÄêÊº∏Ê∂àÂ§±", lang: "Italian", en: "Dying away" },
        { term: "smorzando", def: "Êº∏ÊÖ¢‰∏îÊº∏Âº± (ÁÜÑÊªÖ)", lang: "Italian", en: "Dying away (extinguishing)" },
        { term: "sotto voce", def: "‰ΩéËÅ≤Âú∞ (ÂçäËÅ≤)", lang: "Italian", en: "In an undertone" },
        { term: "con, col", def: "Áî®„ÄÅ‰º¥Èö®Ëëó", lang: "Italian", en: "With" },
        { term: "e, ed", def: "Âíå", lang: "Italian", en: "And" },
        { term: "ma", def: "‰ΩÜÊòØ", lang: "Italian", en: "But" },
        { term: "meno", def: "ËºÉÂ∞ë", lang: "Italian", en: "Less" },
        { term: "molto", def: "Âæà„ÄÅÁîö", lang: "Italian", en: "Very, much" },
        { term: "non", def: "‰∏ç", lang: "Italian", en: "Not" },
        { term: "troppo", def: "Â§™„ÄÅÈÅéÂ§ö", lang: "Italian", en: "Too much" },
        { term: "pi√π", def: "Êõ¥Â§ö", lang: "Italian", en: "More" },
        { term: "poco, poco a poco", def: "‰∏ÄÈªûÈªû / ‰∏ÄÈªû‰∏ÄÈªûÂú∞", lang: "Italian", en: "A little / little by little" },
        { term: "assai", def: "ÈùûÂ∏∏ (ÊúâÊôÇÊåáÈÅ©Â∫¶)", lang: "Italian", en: "Very" },
        { term: "quasi", def: "Âπæ‰πé„ÄÅÈ°û‰ºº", lang: "Italian", en: "As if, resembling" },
        { term: "adagio", def: "ÊüîÊùø (Á∑©ÊÖ¢)", lang: "Italian", en: "Slow" },
        { term: "allargando", def: "Êº∏ÂØ¨Âª£ (Êº∏ÊÖ¢‰∏îÊº∏Âº∑)", lang: "Italian", en: "Broadening" },
        { term: "con moto", def: "ÊúâÂãïÊÑüÂú∞", lang: "Italian", en: "With movement" },
        { term: "senza", def: "Ê≤íÊúâ", lang: "Italian", en: "Without" },
        { term: "agitato", def: "ÊøÄÂãïÂú∞", lang: "Italian", en: "Agitated" },
        { term: "maestoso", def: "ËéäÂö¥Âú∞", lang: "Italian", en: "Majestic" },
        { term: "pesante", def: "Ê≤àÈáçÂú∞", lang: "Italian", en: "Heavy" },
        { term: "risoluto", def: "ÊûúÊñ∑Âú∞", lang: "Italian", en: "Bold, strong" },
        { term: "ritmico", def: "ÊúâÁØÄÂ•èÂú∞", lang: "Italian", en: "Rhythmic" },
        { term: "cantando", def: "Ê≠åÂî±Ëà¨Âú∞", lang: "Italian", en: "Singing" },
        { term: "con dolore", def: "ÊÇ≤ÁóõÂú∞", lang: "Italian", en: "With grief/pain" },
        { term: "con spirito", def: "ÊúâÁ≤æÁ•ûÂú∞", lang: "Italian", en: "With spirit" },
        { term: "doloroso", def: "ÁóõËã¶Âú∞„ÄÅÊÇ≤ÁóõÂú∞", lang: "Italian", en: "Sorrowful" },
        { term: "largamente", def: "ÂØ¨Âª£Âú∞", lang: "Italian", en: "Broadly" },
        { term: "sonoro", def: "Èüø‰∫ÆÂú∞", lang: "Italian", en: "Resonant, with rich tone" }
    ];

    let currentMode = 'zh'; // 'zh' or 'en'
    let currentQuestion = null;
    let score = 0;
    let questionCount = 0;
    let isAnswering = true;

    function startQuiz(mode) {
        currentMode = mode;
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('quiz-screen').style.display = 'block';
        nextQuestion();
    }

    function getRandomItem(array) {
        return array[Math.floor(Math.random() * array.length)];
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function generateOptions(correctItem) {
        const options = [correctItem];
        while (options.length < 4) {
            const randomItem = getRandomItem(musicTerms);
            if (!options.includes(randomItem)) {
                options.push(randomItem);
            }
        }
        shuffleArray(options);
        return options;
    }

    function nextQuestion() {
        isAnswering = true;
        questionCount++;
        document.getElementById('progress-display').textContent = `Q: ${questionCount}`;
        
        // Reset UI
        document.getElementById('next-btn').classList.add('hidden');
        document.getElementById('feedback-area').className = 'feedback';
        document.getElementById('feedback-area').style.display = 'none';
        
        // Select Question
        currentQuestion = getRandomItem(musicTerms);
        const options = generateOptions(currentQuestion);

        // Render Question
        document.getElementById('question-term').textContent = currentQuestion.term;
        
        // Render Audio Link (Google Translate)
        const encodedTerm = encodeURIComponent(currentQuestion.term);
        const audioUrl = `https://translate.google.com/?sl=auto&text=${encodedTerm}&op=translate`;
        document.getElementById('audio-btn').href = audioUrl;

        // Render Options
        const optionsContainer = document.getElementById('options-container');
        optionsContainer.innerHTML = '';

        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            
            // Display text based on mode
            if (currentMode === 'zh') {
                btn.textContent = opt.def;
            } else {
                btn.textContent = opt.en;
            }

            btn.onclick = () => checkAnswer(opt, btn);
            optionsContainer.appendChild(btn);
        });
    }

    function checkAnswer(selectedOption, btnElement) {
        if (!isAnswering) return;
        isAnswering = false;

        const isCorrect = selectedOption.term === currentQuestion.term;
        const feedbackArea = document.getElementById('feedback-area');
        const feedbackTitle = document.getElementById('feedback-title');
        const feedbackText = document.getElementById('feedback-text');

        // Highlight buttons
        const allBtns = document.querySelectorAll('.option-btn');
        allBtns.forEach(btn => {
            if ((currentMode === 'zh' && btn.textContent === currentQuestion.def) ||
                (currentMode === 'en' && btn.textContent === currentQuestion.en)) {
                btn.classList.add('correct');
            } else {
                btn.disabled = true;
            }
        });

        if (isCorrect) {
            score++;
            document.getElementById('score-display').textContent = `Score: ${score}`;
            btnElement.classList.add('correct');
            feedbackArea.classList.add('success');
            feedbackTitle.textContent = "Correct! Á≠îÂ∞ç‰∫ÜÔºÅ";
            feedbackTitle.style.color = "#2ECC71";
        } else {
            btnElement.classList.add('wrong');
            feedbackArea.classList.add('error');
            feedbackTitle.textContent = "Incorrect Á≠îÈåØ‰∫Ü";
            feedbackTitle.style.color = "#E74C3C";
        }

        feedbackText.innerHTML = `
            <div style="font-size:1.1em; margin-bottom:5px;"><strong>${currentQuestion.term}</strong> (${currentQuestion.lang})</div>
            <div style="color:#555;">${currentQuestion.def}</div>
            <div style="color:#777; font-size:0.9em;">English: ${currentQuestion.en}</div>
        `;
        
        feedbackArea.style.display = 'block';
        document.getElementById('next-btn').classList.remove('hidden');
    }
</script>

</body>
</html>
